---
feature: music-player
complexity: standard
generated_by: clarify
generated_at: 2026-02-06T00:00:00Z
version: 1
---

# 需求文档: 博客音乐播放器

> **功能标识**: music-player
> **复杂度**: standard
> **生成方式**: clarify
> **生成时间**: 2026-02-06

## 1. 概述

### 1.1 一句话描述

为 Hexo Chic 主题博客添加一个悬浮吸底音乐播放器，支持播放本地 mp3 音频文件，提供基础播放控制、歌曲列表和音量调节功能。

### 1.2 核心价值

- 提升博客的个性化体验，让访客在阅读文章时可以享受博主精选的背景音乐
- 增强博客的氛围感和沉浸感，体现博主的音乐品味
- 不干扰阅读体验（不自动播放，用户主动触发）

### 1.3 目标用户

- **主要用户**：博客访客，希望在浏览文章时有背景音乐陪伴
- **次要用户**：博主本人，管理和更新歌曲列表

---

## 2. 需求与用户故事

### 2.1 需求清单

| ID | 需求点 | 优先级 | 用户故事 |
|----|--------|--------|----------|
| R-001 | 吸底播放器骨架 | P0 | As a 访客, I want 看到页面底部有一个音乐播放器, so that 我知道可以听音乐 |
| R-002 | 播放/暂停控制 | P0 | As a 访客, I want 点击按钮播放或暂停音乐, so that 我可以控制音乐播放 |
| R-003 | 上一首/下一首切换 | P0 | As a 访客, I want 切换到上一首或下一首歌曲, so that 我可以选择想听的歌 |
| R-004 | 播放进度条 | P0 | As a 访客, I want 看到播放进度并拖拽跳转, so that 我可以控制播放位置 |
| R-005 | 本地音频加载 | P0 | As a 博主, I want 通过配置文件管理本地 mp3 歌曲列表, so that 我可以方便地增删歌曲 |
| R-006 | 歌曲列表面板 | P1 | As a 访客, I want 展开查看所有歌曲并点击切换, so that 我可以选择喜欢的歌 |
| R-007 | 音量控制 | P1 | As a 访客, I want 调节音量大小和静音, so that 我可以控制音量不影响他人 |
| R-008 | 深浅色主题适配 | P1 | As a 访客, I want 播放器跟随博客主题切换外观, so that 视觉体验一致 |
| R-009 | localStorage 状态记忆 | P2 | As a 访客, I want 刷新或切换页面后恢复播放状态, so that 不用重新选歌 |
| R-010 | 移动端响应式适配 | P2 | As a 手机用户, I want 在手机上也能正常使用播放器, so that 移动端体验良好 |

### 2.2 验收标准

#### R-001: 吸底播放器骨架
- **WHEN** 用户打开博客任意页面, **THEN** 系统 **SHALL** 在页面底部显示一个固定定位的播放器栏
- **WHEN** 播放器显示时, **THEN** 系统 **SHALL NOT** 遮挡页面正文内容（footer 需留出播放器高度的间距）

#### R-002: 播放/暂停控制
- **WHEN** 用户点击播放按钮, **THEN** 系统 **SHALL** 开始播放当前歌曲，按钮切换为暂停图标
- **WHEN** 用户点击暂停按钮, **THEN** 系统 **SHALL** 暂停播放，按钮切换为播放图标

#### R-003: 上一首/下一首切换
- **WHEN** 用户点击下一首按钮, **THEN** 系统 **SHALL** 切换到列表中的下一首歌曲
- **WHEN** 当前为最后一首且点击下一首, **THEN** 系统 **SHALL** 循环回到第一首
- **WHEN** 用户点击上一首按钮, **THEN** 系统 **SHALL** 切换到列表中的上一首歌曲

#### R-004: 播放进度条
- **WHEN** 歌曲播放中, **THEN** 系统 **SHALL** 实时更新进度条位置和当前时间/总时长显示
- **WHEN** 用户拖拽或点击进度条, **THEN** 系统 **SHALL** 跳转到对应播放位置

#### R-005: 本地音频加载
- **WHEN** 页面加载时, **THEN** 系统 **SHALL** 从配置文件（music.json）读取歌曲列表
- **WHEN** 配置文件包含歌曲信息, **THEN** 系统 **SHALL** 显示歌曲名称和艺术家

#### R-006: 歌曲列表面板
- **WHEN** 用户点击列表按钮, **THEN** 系统 **SHALL** 展开歌曲列表面板
- **WHEN** 用户点击列表中的某首歌, **THEN** 系统 **SHALL** 切换并播放该歌曲
- **WHEN** 用户再次点击列表按钮, **THEN** 系统 **SHALL** 收起列表面板

#### R-007: 音量控制
- **WHEN** 用户拖动音量滑块, **THEN** 系统 **SHALL** 实时调整播放音量
- **WHEN** 用户点击静音按钮, **THEN** 系统 **SHALL** 切换静音/恢复状态

#### R-008: 深浅色主题适配
- **WHEN** 博客主题切换为深色模式, **THEN** 播放器 **SHALL** 自动切换为深色外观
- **WHEN** 博客主题切换为浅色模式, **THEN** 播放器 **SHALL** 自动切换为浅色外观

#### R-009: localStorage 状态记忆
- **WHEN** 用户刷新页面或跳转到其他页面, **THEN** 系统 **SHALL** 恢复上次的歌曲索引、播放进度和音量设置
- **WHEN** 用户首次访问（无存储记录）, **THEN** 系统 **SHALL** 默认显示第一首歌曲，音量 80%

#### R-010: 移动端响应式适配
- **WHEN** 屏幕宽度 < 768px, **THEN** 播放器 **SHALL** 简化布局（隐藏非核心元素）
- **WHEN** 在移动端展开歌曲列表, **THEN** 列表 **SHALL** 适配小屏幕宽度

---

## 3. 功能验收清单

| ID | 功能点 | 验收步骤 | 优先级 | 关联需求 | 通过 |
|----|--------|----------|--------|----------|------|
| F-001 | 播放器可见 | 1. 打开首页 2. 页面底部显示播放器栏 | P0 | R-001 | ☐ |
| F-002 | 播放/暂停 | 1. 点击播放 2. 音乐开始 3. 点击暂停 4. 音乐停止 | P0 | R-002 | ☐ |
| F-003 | 切换歌曲 | 1. 点击下一首 2. 歌曲切换 3. 点击上一首 4. 歌曲回退 | P0 | R-003 | ☐ |
| F-004 | 进度控制 | 1. 播放中观察进度条移动 2. 拖拽进度条 3. 播放位置跳转 | P0 | R-004 | ☐ |
| F-005 | 歌曲加载 | 1. 检查 music.json 配置 2. 播放器显示歌曲名和艺术家 | P0 | R-005 | ☐ |
| F-006 | 歌曲列表 | 1. 点击列表按钮 2. 面板展开 3. 点击某首歌 4. 切换播放 | P1 | R-006 | ☐ |
| F-007 | 音量调节 | 1. 拖动音量滑块 2. 音量变化 3. 点击静音 4. 声音消失 | P1 | R-007 | ☐ |
| F-008 | 主题适配 | 1. 切换深色模式 2. 播放器变为深色 3. 切换浅色 4. 播放器变浅 | P1 | R-008 | ☐ |
| F-009 | 状态记忆 | 1. 播放某首歌 2. 刷新页面 3. 播放器恢复到之前的歌曲和进度 | P2 | R-009 | ☐ |
| F-010 | 移动端适配 | 1. 手机打开博客 2. 播放器正常显示 3. 功能可用 | P2 | R-010 | ☐ |

---

## 4. 技术约束

### 4.1 技术栈

- **前端**：原生 HTML + CSS + Vanilla JavaScript（无框架依赖）
- **音频 API**：HTML5 Audio API
- **数据格式**：JSON 配置文件（`/music/music.json`）管理歌曲列表
- **音频文件**：mp3 格式，存放在 `/music/` 目录下
- **状态存储**：localStorage（与现有主题切换机制一致）

### 4.2 集成点

- **HTML 页面**：需在所有页面（index.html、about/index.html、文章页等）的 `</body>` 前插入播放器 HTML 和 JS 引用
- **CSS**：新增 `/css/music-player.css`，通过 `<link>` 标签引入
- **JS**：新增 `/js/music-player.js`，通过 `<script>` 标签引入
- **主题切换**：复用 `js/script.js` 中的 `.dark-theme` class 机制，通过 CSS 选择器适配
- **布局影响**：`.footer` 需增加 `padding-bottom` 避免被播放器遮挡

### 4.3 歌曲配置文件格式

```json
// /music/music.json
[
  {
    "title": "歌曲名称",
    "artist": "艺术家",
    "src": "/music/song1.mp3"
  }
]
```

---

## 5. 排除项

- **播放模式切换**（单曲循环/随机播放）：当前版本不实现，默认列表顺序循环
- **歌词显示**：不实现歌词同步显示功能
- **在线搜索/流媒体**：不接入任何第三方音乐平台 API
- **封面图片**：当前版本不显示专辑封面
- **键盘快捷键**：不实现空格暂停等快捷键控制
- **跨浏览器标签同步**：多标签页独立播放，不做同步

---

## 6. 下一步

### 实施路径

按优先级分三个阶段实施：

**阶段 1（P0 - 核心可用）**：
- 创建播放器 HTML 骨架 + CSS 样式
- 实现 HTML5 Audio 播放/暂停/切歌
- 实现进度条显示和拖拽
- 创建 music.json 配置和 /music/ 目录
- 在所有页面引入播放器

**阶段 2（P1 - 功能完善）**：
- 歌曲列表面板（展开/收起）
- 音量滑块 + 静音按钮
- 深色/浅色主题 CSS 适配

**阶段 3（P2 - 体验优化）**：
- localStorage 状态持久化
- 移动端响应式布局精调

### 涉及的文件变更

| 操作 | 文件路径 | 说明 |
|------|----------|------|
| 新增 | `/js/music-player.js` | 播放器核心逻辑 |
| 新增 | `/css/music-player.css` | 播放器样式 |
| 新增 | `/music/music.json` | 歌曲配置文件 |
| 新增 | `/music/*.mp3` | 音频文件（用户自行添加）|
| 修改 | `index.html` | 引入播放器 HTML/CSS/JS |
| 修改 | `about/index.html` | 引入播放器 HTML/CSS/JS |
| 修改 | 各文章页 `index.html` | 引入播放器 HTML/CSS/JS |

---

> 本文档由 `/clouditera:dev:clarify` 自动生成
